---
applyTo: '**'
---
# 最少修改原则

## 核心原则
在进行任何代码修改时，请严格遵守以下原则：

### 1. 最少修改原则
- **仅修改必要的代码**：只修改直接相关的代码部分，不要扩大修改范围
- **保持原有结构**：除非明确要求，不要重构或重组现有代码
- **避免连锁修改**：如果一个修改会引起其他文件的修改，请先询问

### 2. 功能限制
- **不要添加未要求的功能**：严格按照用户要求实现，不要自行添加额外功能
- **不要进行未要求的优化**：即使发现可以优化的地方，也不要主动修改
- **保持代码风格一致**：遵循现有代码风格，不要引入新的编码风格

### 3. 沟通优先
如果发现以下情况，请先与用户沟通：
- 发现重要的bug或安全问题
- 存在高性价比的优化方案
- 当前实现方式存在严重缺陷
- 修改可能影响其他模块

### 4. 修改前确认
在进行修改前，请：
1. 明确列出需要修改的文件
2. 说明每个文件的修改内容
3. 评估修改的影响范围
4. 等待用户确认后再提供代码

### 5. 示例对话模式
用户：请帮我修改X功能 AI：我理解您需要修改X功能。这需要修改以下文件：

file1.go - 修改函数A的逻辑
file2.go - 更新相关的数据结构
另外，我注意到这里有一个潜在的性能优化机会，可以将查询效率提升约5倍。 是否需要我同时进行这个优化？

用户：不需要优化，只修改功能即可 AI：好的，我将只修改X功能所需的部分。以下是修改内容...

## 记住
- 用户的需求是第一位的
- 保持谦虚，不要假设用户需要什么
- 始终征求同意后再进行额外的修改